 /* ****************************************************************************
 * $Revision: 48884 $:
 * $Author: dhara.pithadiya $:
 * $Date: 2015-08-18 14:24:02 +0700 (Tue, 18 Aug 2015) $:
 * $HeadURL: http://svn01.rapidesuite.com:999/svn/a/dev/rapidesuite/controldata/FUSION_11.1.9/trunk/core/reverse_sql/FINANCIALS/Manage%20Transaction%20Types%20-%20Manage%20Transaction%20Types.sql $:
 * $Id: Manage Transaction Types - Manage Transaction Types.sql 48884 2015-08-18 07:24:02Z dhara.pithadiya $:
 * ****************************************************************************
 * Description:
 * ************************************************************************** */

-- RSC_PREREQUISITE_OBJECTS=HRG_GOAL_PLAN_GOALS
-- REPLACE_HTML_KEYWORD = RES_SUCCESS_CRITERIA
-- REPLACE_HTML_KEYWORD = RES_COMMENTS

SELECT goldPlansE0.GOAL_PLAN_NAME RES_GOAL_PLAN
,hrgGOALE0.GOAL_NAME RES_GOAL_NAME
,goldPlansE0.GOAL_PLAN_EXT_ID RES_EXTERNAL_ID
,hrgGOALE0.GOAL_SUB_TYPE_CODE RES_SUBTYPE
,(SELECT MEANING
	FROM FND_LOOKUP_VALUES
	WHERE LANGUAGE = USERENV('LANG')
	AND LOOKUP_TYPE = 'HRG_PRIORITY'
	AND LOOKUP_CODE = goalsE0.PRIORITY_CODE 
	) RES_PRIORITY
,goalsE0.WEIGHTING RES_WEIGHT
,(SELECT GOAL_PLAN_SET_NAME
	FROM HRG_GOAL_PLAN_SETS_TL
	WHERE LANGUAGE = USERENV('LANG')
	AND GOAL_PLAN_SET_ID = goalsE0.GOAL_PLAN_SET_ID 
	) RES_CATEGORY
,TO_CHAR(hrgGOALE0.START_DATE,'DD-Mon-YYYY') RES_START_DATE
,TO_CHAR(hrgGOALE0.TARGET_COMPLETION_DATE,'DD-Mon-YYYY') RES_TARGET_COMPLETION_DATE
,TO_CHAR(hrgGOALE0.ACTUAL_COMPLETION_DATE,'DD-Mon-YYYY') RES_ACTUAL_COMPLETION_DATE
,hrgGOALE0.PERCENT_COMPLETE_CODE RES_COMPLETION_PERCENTAGE
,(SELECT MEANING
	FROM FND_LOOKUP_VALUES
	WHERE LANGUAGE = USERENV('LANG')
	AND LOOKUP_TYPE = 'HRG_GOAL_STATUS'
	AND LOOKUP_CODE = hrgGOALE0.STATUS_CODE 
	) RES_STATUS
,(SELECT MEANING
	FROM FND_LOOKUP_VALUES
	WHERE LANGUAGE = USERENV('LANG')
	AND LOOKUP_TYPE = 'HRG_GOAL_MEASUREMENT_LEVEL'
	AND LOOKUP_CODE = hrgGOALE0.LEVEL_CODE 
	) RES_LEVEL
,DECODE(hrgGOALE0.ALLOW_KEY_ATTR_UPDATE_FLAG,'Y','Yes','No') RES_ALLOW_WORKERS_TO_UPDATE_KE
,hrgGOALE0.DESCRIPTION RES_DESCRIPTION
,REPLACE(REPLACE(REPLACE(hrgGOALE0.SUCCESS_CRITERIA_TEXT,'&','#AMP#'),'<','#OPENTAG#'),'>','#CLOSETAG#') RES_SUCCESS_CRITERIA
,REPLACE(REPLACE(REPLACE(hrgGOALE0.COMMENTS_TEXT,'&','#AMP#'),'<','#OPENTAG#'),'>','#CLOSETAG#') RES_COMMENTS
,hrgGOALE0.GOAL_URL RES_RELATED_LINK
,goalsE0.DISPLAY_SEQUENCE RES_DISPLAY_SEQUENCE

,goalsE0.LAST_UPDATED_BY  RSC_LAST_UPDATED_BY
,goalsE0.LAST_UPDATE_DATE  RSC_LAST_UPDATE_DATE
,goalsE0.CREATED_BY  RSC_CREATED_BY
,goalsE0.CREATION_DATE  RSC_CREATION_DATE
,null RSC_LEDGER_ID
,null RSC_CHART_OF_ACCOUNTS_ID
,null RSC_BUSINESS_UNIT_ID
,null RSC_LEGAL_ENTITY_ID
,null RSC_ORGANIZATION_ID
,goldPlansE0.BUSINESS_GROUP_ID RSC_BUSINESS_GROUP_ID
,NULL RSC_ENTERPRISE_ID
,NULL RSC_COUNTRY_ID

FROM HRG_GOAL_PLANS_VL goldPlansE0
,HRG_GOAL_PLAN_GOALS goalsE0
,HRG_GOALS hrgGOALE0
WHERE goldPlansE0.GOAL_PLAN_ID = goalsE0.GOAL_PLAN_ID
AND goalsE0.GOAL_ID = hrgGOALE0.GOAL_ID
AND goldPlansE0.GOAL_PLAN_TYPE_CODE = 'ORA_HRG_WORKER'
AND goldPlansE0.MASS_REQUEST_ID = hrgGOALE0.MASS_REQUEST_ID
AND SYSDATE BETWEEN NVL(goalsE0.EFFECTIVE_START_DATE,TO_DATE('01-01-1950','DD-MM-YYYY')) AND NVL(goalsE0.EFFECTIVE_END_DATE,TO_DATE('31-12-4712','DD-MM-YYYY'))
ORDER BY goldPlansE0.GOAL_PLAN_NAME