/* ****************************************************************************
* $Revision: 67218 $:
* $Author: pisan.jariyasettachok $:
* $Date: 2018-03-21 11:56:22 +0700 (Wed, 21 Mar 2018) $:
* $HeadURL: http://svn01.rapidesuite.com:999/svn/a/dev/rapidesuite/controldata/FUSION_11.1.13/trunk/core/reverse_sql/FINANCIALS/Manage%20Key%20Flexfields%20-%20Key%20Flexfield%20Segment.sql $:
* $Id: Manage Key Flexfields - Key Flexfield Segment.sql 67218 2018-03-21 04:56:22Z pisan.jariyasettachok $:
* ****************************************************************************
* Description:
* ************************************************************************** */


SELECT subledgerApplicationsE0.APPLICATION_NAME RES_SUBLEDGER_APPLICATION
,SourcesE0.SOURCE_CODE RES_OBJECT_COLUMN_NAME
,SourcesE0.NAME RES_NAME
,(SELECT MEANING 
	FROM XLA_LOOKUPS
	WHERE LOOKUP_TYPE = 'XLA_DATA_TYPE'
	AND LOOKUP_CODE = SourcesE0.DATATYPE_CODE
	) RES_DATA_TYPE
,SourcesE0.DESCRIPTION RES_DESCRIPTION
,(CASE
	WHEN SourcesE0.SEGMENT_CODE IS NOT NULL THEN
		(CASE 
			WHEN SourcesE0.SEGMENT_CODE = 'OTHER' THEN
				'Other'
			ELSE
				(SELECT NAME
					FROM FND_KF_SEGMENT_LABELS_TL
					WHERE APPLICATION_ID = SourcesE0.FLEXFIELD_APPLICATION_ID
					AND KEY_FLEXFIELD_CODE =SourcesE0.ID_FLEX_CODE
					AND SEGMENT_LABEL_CODE = SourcesE0.SEGMENT_CODE
					AND LANGUAGE = USERENV('LANG'))
			END)
	END) RES_FLEXFIELD_SEGMENT_NAME
,(SELECT APPLICATION_NAME
	FROM FND_APPLICATION_VL
	WHERE APPLICATION_ID = SourcesE0.FLEXFIELD_APPLICATION_ID
	) RES_FLEXFIELD_APPLICATION
,(SELECT NAME FROM FND_KF_FLEXFIELDS_TL
	WHERE LANGUAGE = USERENV('LANG')
	AND KEY_FLEXFIELD_CODE = SourcesE0.ID_FLEX_CODE
	AND APPLICATION_ID = SourcesE0.FLEXFIELD_APPLICATION_ID
	) RES_FLEXFIELD_TITLE
,(SELECT APPLICATION_NAME
	FROM FND_APPLICATION_VL
	WHERE APPLICATION_ID = SourcesE0.VIEW_APPLICATION_ID
	) RES_LOOKUP_APPLICATION
,(SELECT MEANING 
	FROM FND_LOOKUP_TYPES_TL
	WHERE LANGUAGE = USERENV('LANG')
	AND LOOKUP_TYPE = SourcesE0.LOOKUP_TYPE
	AND VIEW_APPLICATION_ID = SourcesE0.VIEW_APPLICATION_ID
	) RES_LOOKUP_TYPE
,(SELECT VALUE_SET_CODE 
	FROM FND_VS_VALUE_SETS
	WHERE VALUE_SET_ID = SourcesE0.FLEX_VALUE_SET_ID
	) RES_VALUE_SET
,DECODE(SourcesE0.SUM_FLAG,'Y','Yes','No') RES_SUMMED
,DECODE(SourcesE0.TRANSLATED_FLAG,'Y','Yes','No') RES_TRANSLATED
,(SELECT MEANING 
	FROM XLA_LOOKUPS
	WHERE LOOKUP_TYPE = 'XLA_ACTIVE_INACTIVE'
	AND LOOKUP_CODE = SourcesE0.ENABLED_FLAG
	) RES_STATUS
,DECODE(SourcesE0.VISIBLE_FLAG,'Y','Yes','No') RES_DISPLAYED
,SourcesE0.LAST_UPDATED_BY RSC_LAST_UPDATED_BY
,SourcesE0.LAST_UPDATE_DATE RSC_LAST_UPDATE_DATE
,SourcesE0.CREATED_BY RSC_CREATED_BY
,SourcesE0.CREATION_DATE RSC_CREATION_DATE
,NULL RSC_LEDGER_ID
,NULL RSC_CHART_OF_ACCOUNTS_ID
,NULL RSC_BUSINESS_UNIT_ID
,NULL RSC_LEGAL_ENTITY_ID
,NULL RSC_ORGANIZATION_ID
,NULL RSC_BUSINESS_GROUP_ID
,NULL RSC_ENTERPRISE_ID
,NULL RSC_COUNTRY_ID

FROM XLA_SOURCES_VL SourcesE0
,FND_APPLICATION_VL subledgerApplicationsE0
WHERE SourcesE0.APPLICATION_ID = subledgerApplicationsE0.APPLICATION_ID
ORDER BY 1,2