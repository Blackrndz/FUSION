/* ****************************************************************************
 * $Revision$:
 * $Author$:
 * $Date$:
 * $HeadURL$:
 * $Id$:
 * ****************************************************************************
 * Description:
 * ************************************************************************** */
 
-- RSC_PREREQUISITE_OBJECTS=XCC_CONTROL_BUDGETS

/*<RSC_PRE_STEPS_LARGE_COLUMN_POSITION>10,11,12</RSC_PRE_STEPS_LARGE_COLUMN_POSITION>
	
-- The column position that using special data type.
 <RSC_PRE_STEPS_LARGE_COLUMN_TYPE>LONG</RSC_PRE_STEPS_LARGE_COLUMN_TYPE>

-- Specify what type of the data.
*/
SELECT xccCONTROLBUDE0.NAME  RES_NAME
,DECODE(xccCONTROLBUDE0.ALLOW_OVERRIDES_FLAG,'Y','Yes','No') RES_ALLOW_OVERRIDES
,xccOVERIDE0.NAME RES_OVERRIDE_RULES_NAME
,(SELECT DISPLAY_NAME
	FROM PER_PERSON_NAMES_F
	WHERE PERSON_ID = perUSERE0.PERSON_ID
	AND NAME_TYPE = 'GLOBAL'
	AND SYSDATE BETWEEN EFFECTIVE_START_DATE AND EFFECTIVE_END_DATE) RES_USER_ASSIGNMENTS_NAME
,perUSERE0.USERNAME RES_USER_ASSIGNMENTS_USER_NAME

,xccOVERIDUSERE0.LAST_UPDATED_BY RSC_LAST_UPDATED_BY
,xccOVERIDUSERE0.LAST_UPDATE_DATE RSC_LAST_UPDATE_DATE
,xccOVERIDUSERE0.CREATED_BY RSC_CREATED_BY
,xccOVERIDUSERE0.CREATION_DATE RSC_CREATION_DATE
,xccCONTROLBUDE0.LEDGER_ID RSC_LEDGER_ID
,NULL RSC_CHART_OF_ACCOUNTS_ID
,NULL RSC_BUSINESS_UNIT_ID
,NULL RSC_LEGAL_ENTITY_ID
,NULL RSC_ORGANIZATION_ID
,NULL RSC_BUSINESS_GROUP_ID
,NULL RSC_ENTERPRISE_ID
,NULL RSC_COUNTRY_ID

FROM XCC_CONTROL_BUDGETS xccCONTROLBUDE0
,XCC_CB_OVERRIDE_RULES xccOVERIDE0
,XCC_CB_OVERRIDE_USERS xccOVERIDUSERE0
,PER_USERS perUSERE0
WHERE xccCONTROLBUDE0.CONTROL_BUDGET_ID = xccOVERIDE0.CONTROL_BUDGET_ID
AND xccCONTROLBUDE0.ALLOW_OVERRIDES_FLAG = 'Y'
AND xccOVERIDE0.OVERRIDE_RULE_ID = xccOVERIDUSERE0.OVERRIDE_RULE_ID
AND perUSERE0.USER_ID = xccOVERIDUSERE0.USER_ID
AND SYSDATE BETWEEN perUSERE0.START_DATE AND NVL(perUSERE0.END_DATE,TO_DATE('4712-12-31','YYYY-MM-DD'))

ORDER BY 1,3