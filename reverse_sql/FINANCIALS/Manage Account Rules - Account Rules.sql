/* ****************************************************************************
 * $Revision: 56649 $:
 * $Author: wuttipong.thongvises $:
 * $Date: 2016-07-12 11:20:44 +0700 (Tue, 12 Jul 2016) $:
 * $HeadURL: http://svn01.rapidesuite.com:999/svn/a/dev/rapidesuite/controldata/FUSION_11.1.12/branches/core/v2.2.0.0/reverse_sql/FINANCIALS/Currency%20Rates%20Manager%20-%20Rate%20Types.sql $:
 * $Id: Currency Rates Manager - Rate Types.sql 56649 2016-07-12 04:20:44Z wuttipong.thongvises $:
 * ****************************************************************************
 * Description:
 * ************************************************************************** */
 

SELECT
	(SELECT APPLICATION_NAME
	FROM XLA_SUBLEDGERS_TL
	WHERE LANGUAGE = USERENV('LANG')
	AND APPLICATION_ID = XlaSegRulesVlE0.APPLICATION_ID
	) RES_SUBLEDGER_APPLICATION
,XlaSegRulesVlE0.NAME RES_NAME
,XlaSegRulesVlE0.SEGMENT_RULE_CODE RES_SHORT_NAME
,XlaSegRulesVlE0.DESCRIPTION RES_DESCRIPTION
,(SELECT NAME
	FROM FND_KF_STR_INSTANCES_VL
	WHERE STRUCTURE_INSTANCE_NUMBER = XlaSegRulesVlE0.ACCOUNTING_COA_ID
	) RES_CHART_OF_ACCOUNTS
,DECODE(XlaSegRulesVlE0.FLEXFIELD_ASSIGN_MODE_CODE,'A','Account combination','S','Segment','V','Value set')
	RES_RULE_TYPE
,(CASE
	WHEN XlaSegRulesVlE0.ACCOUNTING_COA_ID IS NOT NULL THEN
		(SELECT KfSegmentE0.NAME
		FROM FND_KF_STR_INSTANCES_VL StrInstancesE0
		,FND_KF_SEGMENTS_VL KfSegmentE0
		WHERE StrInstancesE0.STRUCTURE_ID = KfSegmentE0.STRUCTURE_ID
		AND StrInstancesE0.STRUCTURE_INSTANCE_NUMBER = XlaSegRulesVlE0.ACCOUNTING_COA_ID
		AND KfSegmentE0.COLUMN_NAME = XlaSegRulesVlE0.FLEXFIELD_SEGMENT_CODE)
	ELSE
		(SELECT NAME
		FROM FND_KF_SEGMENT_LABELS_VL
		WHERE SEGMENT_LABEL_CODE = XlaSegRulesVlE0.FLEXFIELD_SEGMENT_CODE)
	END) RES_RULE_TYPE_SEGMENT
,(SELECT VALUE_SET_CODE
	FROM FND_VS_VALUE_SETS
	WHERE VALUE_SET_ID = XlaSegRulesVlE0.FLEX_VALUE_SET_ID
	) RES_RULE_TYPE_VALUE_SET
,DECODE(XlaSegRulesVlE0.ENABLED_FLAG,'Y','Active','Inactivate') RES_STATUS
,XlaSegRulesVlE0.LAST_UPDATED_BY RSC_LAST_UPDATED_BY
,XlaSegRulesVlE0.LAST_UPDATE_DATE RSC_LAST_UPDATE_DATE
,XlaSegRulesVlE0.CREATED_BY RSC_CREATED_BY
,XlaSegRulesVlE0.CREATION_DATE RSC_CREATION_DATE
,NULL RSC_LEDGER_ID
,XlaSegRulesVlE0.ACCOUNTING_COA_ID RSC_CHART_OF_ACCOUNTS_ID
,NULL RSC_BUSINESS_UNIT_ID
,NULL RSC_LEGAL_ENTITY_ID
,NULL RSC_ORGANIZATION_ID
,NULL RSC_BUSINESS_GROUP_ID
,NULL RSC_ENTERPRISE_ID
,NULL RSC_COUNTRY_ID

FROM XLA_SEG_RULES_VL XlaSegRulesVlE0
ORDER BY RES_SUBLEDGER_APPLICATION
,XlaSegRulesVlE0.NAME