/* ****************************************************************************
 * $Revision: 59216 $:
 * $Author: pisan.jariyasettachok $:
 * $Date: 2016-10-27 17:36:29 +0700 (Thu, 27 Oct 2016) $:
 * $HeadURL: http://svn01.rapidesuite.com:999/svn/a/dev/rapidesuite/controldata/FUSION_11.1.9/trunk/core/reverse_sql/FINANCIALS/Manage%20Tax%20Regimes%20-%20Transaction%20Tax%20Regimes.sql $:
 * $Id: Manage Tax Regimes - Transaction Tax Regimes.sql 59216 2016-10-27 10:36:29Z pisan.jariyasettachok $:
 * ****************************************************************************
 * Description:
 * ************************************************************************** */
 

SELECT ZxRegimesVl.TAX_REGIME_CODE RES_TAX_REGIME_CODE
,ZxRegimesVl.TAX_REGIME_NAME RES_TAX_REGIME_NAME
,TerritoriesE0.TERRITORY_SHORT_NAME RES_COUNTRY
,TO_CHAR(ZxRegimesVl.EFFECTIVE_FROM,'DD-Mon-YYYY') RES_START_DATE
,TO_CHAR(ZxRegimesVl.EFFECTIVE_TO,'DD-Mon-YYYY') RES_END_DATE
,DECODE(CurrencyPeo.CURRENCY_CODE,NULL,NULL,CurrencyPeo.CURRENCY_CODE||' - '||CurrencyPeo.NAME) RES_TAX_CURRENCY
/*,ZxRegimesVl.MINIMUM_ACCOUNTABLE_UNIT RES_MINIMUM_ACCOUNTABLE_UNIT*/
,decode(substr(ZxRegimesVl.MINIMUM_ACCOUNTABLE_UNIT, 1, 1),'.', trim(to_char(ZxRegimesVl.MINIMUM_ACCOUNTABLE_UNIT,'0.99')) ,  ZxRegimesVl.MINIMUM_ACCOUNTABLE_UNIT ) RES_MINIMUM_ACCOUNTABLE_UNIT
,ZxRegimesVl.TAX_PRECISION RES_TAX_PRECISION
,RoundingLookup.meaning RES_ROUNDING_RULE
,DECODE(ZxRegimesVl.ALLOW_ROUNDING_OVERRIDE_FLAG,'Y','Yes','No') RES_ALLOW_TAX_ROUNDING_OVERRID
,DECODE(ZxRegimesVl.REGN_NUM_SAME_AS_LE_FLAG,'Y','Yes','No') RES_USE_LEGAL_REGISTRATION_NUM
,(SELECT MEANING
	FROM FND_LOOKUPS
	WHERE LOOKUP_TYPE = 'ZX_WHT_BUCKET_LEVEL'
	AND LOOKUP_CODE   = ZxRegimesVl.BUCKET_LEVEL_FLAG
	) RES_WITHHOLDING_BUCKETS_LEVEL
,ZxRegimesVl.VALIDATION_TYPE RES_VALIDATION_TYPE
,(SELECT MEANING
	FROM FND_LOOKUP_VALUES
	WHERE LANGUAGE = USERENV('LANG')
	AND LOOKUP_TYPE = 'ZX_VALIDATION_LEVEL'
	AND LOOKUP_CODE = ZxRegimesVl.VALIDATION_LEVEL
	) RES_VALIDATION_LEVEL
,(SELECT MEANING
	FROM FND_LOOKUP_VALUES
	WHERE LANGUAGE = USERENV('LANG')
	AND LOOKUP_TYPE = 'ZX_UNIQUENESS_VALIDATION_LVL'
	AND LOOKUP_CODE = ZxRegimesVl.Uniqueness_Validation_Level 
	) RES_DUPLICATE_VALIDATION_LEVEL
,DECODE(ZxRegimesVl.CROSS_REGIME_COMPOUNDING_FLAG,'Y','Yes','No') RES_ALLOW_CROSS_REGIME_COMPOUN
,ZxRegimesVl.REGIME_PRECEDENCE RES_COMPOUNDING_PRECEDENCE
,ZxRegimesVl.LAST_UPDATED_BY RSC_LAST_UPDATED_BY
,ZxRegimesVl.LAST_UPDATE_DATE RSC_LAST_UPDATE_DATE
,ZxRegimesVl.CREATED_BY RSC_CREATED_BY
,ZxRegimesVl.CREATION_DATE RSC_CREATION_DATE
,NULL RSC_LEDGER_ID
,NULL RSC_CHART_OF_ACCOUNTS_ID
,NULL RSC_BUSINESS_UNIT_ID
,NULL RSC_LEGAL_ENTITY_ID
,NULL RSC_ORGANIZATION_ID
,NULL RSC_BUSINESS_GROUP_ID
,NULL RSC_ENTERPRISE_ID
,NULL RSC_COUNTRY_ID
FROM ZX_REGIMES_VL ZxRegimesVl
,FND_TERRITORIES_VL TerritoriesE0
,FND_LOOKUPS RoundingLookup
,FND_CURRENCIES_VL CurrencyPeo
WHERE TerritoriesE0.TERRITORY_CODE (+)     = ZxRegimesVl.COUNTRY_CODE
AND RoundingLookup.LOOKUP_TYPE (+)         = 'ZX_ROUNDING_RULE'
AND RoundingLookup.LOOKUP_CODE (+)         = ZxRegimesVl.ROUNDING_RULE_CODE
AND CurrencyPeo.CURRENCY_CODE (+)          = ZxRegimesVl.TAX_CURRENCY_CODE
AND NVL(ZxRegimesVl.REGIME_TYPE_FLAG,'I') <> 'I'
ORDER BY ZxRegimesVl.REGIME_TYPE_FLAG
,ZxRegimesVl.TAX_REGIME_CODE
,TerritoriesE0.TERRITORY_SHORT_NAME