/* ****************************************************************************
* $Revision: 55345 $:
* $Author: wuttipong.thongvises $:
* $Date: 2016-05-23 12:42:33 +0700 (Mon, 23 May 2016) $:
* $HeadURL: http://svn01.rapidesuite.com:999/svn/a/dev/rapidesuite/controldata/FUSION_11.1.9/trunk/core/reverse_sql/
FINANCIALS/Manage%20Server%20Configurations%20-%20Manage%20Data%20Quality%20Server%20Configurations.sql $:
* $Id: Manage Server Configurations - Manage Data Quality Server Configurations.sql 55345 2016-05-23 05:42:33Z
wuttipong.thongvises $:
* ****************************************************************************
* Description:
* ************************************************************************** */


SELECT payALLPREO.PAYROLL_NAME RES_NAME
,payALLPREO.REPORTING_NAME RES_REPORTING_NAME
,(SELECT CONSOLIDATION_SET_NAME FROM PAY_CONSOLIDATION_SETS WHERE CONSOLIDATION_SET_ID = payALLPREO.CONSOLIDATION_SET_ID ) RES_CONSOLIDATION_GROUP
,(SELECT MEANING FROM FND_LOOKUP_VALUES WHERE LOOKUP_CODE = payALLPREO.PERIOD_TYPE
	AND LOOKUP_TYPE =  'PAY_PROC_PERIOD_TYPE' AND LANGUAGE = USERENV('LANG') 
	AND SYSDATE BETWEEN START_DATE_ACTIVE AND NVL(END_DATE_ACTIVE,TO_DATE('4712-12-31','YYYY-MM-DD')) ) RES_PERIOD_TYPE
,(SELECT NAME FROM GL_SETS_OF_BOOKS WHERE SET_OF_BOOKS_ID = payALLPREO.GL_SET_OF_BOOKS_ID) RES_LEDGER
,DECODE(payALLPREO.NEGATIVE_PAY_ALLOWED_FLAG,'Y','Yes','No') RES_ALLOW_NEGATIVE_PAYMENTS
,(SELECT NAME FROM PER_LEGISLATIVE_DATA_GROUPS_VL 
	WHERE LEGISLATIVE_DATA_GROUP_ID = payALLPREO.LEGISLATIVE_DATA_GROUP_ID) RES_LEGISLATIVE_DATA_GROUP
--,TO_CHAR(SYSDATE,'DD-Mon-YYYY') RES_EFFECTIVE_AS_OF_DATE
,TO_CHAR(payALLPREO.EFFECTIVE_START_DATE,'DD-Mon-YYYY') RES_EFFECTIVE_START_DATE
,TO_CHAR(payALLPREO.EFFECTIVE_END_DATE,'DD-Mon-YYYY') RES_EFFECTIVE_END_DATE
,TO_CHAR(payALLPREO.FIRST_PERIOD_END_DATE,'DD-Mon-YYYY') RES_FIRST_PERIOD_END_DATE
,(SELECT ORG_PAYMENT_METHOD_NAME FROM PAY_ORG_PAY_METHODS_VL WHERE ORG_PAYMENT_METHOD_ID = payALLPREO.DEFAULT_PAYMENT_METHOD_ID
	AND SYSDATE BETWEEN EFFECTIVE_START_DATE AND NVL(EFFECTIVE_START_DATE,TO_DATE('4712-12-31','YYYY-MM-DD'))) RES_DEFAULT_PAYMENT_METHOD
,TO_CHAR(payALLPREO.NUMBER_OF_YEARS,'9999') RES_NUMBER_OF_YEARS
,DECODE(payALLPREO.FIXED_DATE,'Y','Yes','No') RES_FIXED_DATE
,TO_CHAR(PAYTMP.CUTOFF_FIXED_DATE,'DD-Mon-YYYY') RES_CUTOFF_DATE
,TO_CHAR(PAYTMP.EARN_FIXED_DATE,'DD-Mon-YYYY') RES_DATE_EARNED
,TO_CHAR(PAYTMP.PROCESS_FIXED_DATE,'DD-Mon-YYYY') RES_PAYROLL_RUN_DATE
,TO_CHAR(PAYTMP.PAYDATE_FIXED_DATE,'DD-Mon-YYYY') RES_DATE_PAID
,TO_CHAR(PAYTMP.PAYSLIP_FIXED_DATE,'DD-Mon-YYYY') RES_PAYSLIP_AVAILABILITY_DATE
,TO_CHAR(PAYTMP.PROCESS_SUB_FIXED_DATE,'DD-Mon-YYYY') RES_PLANNED_SUBMISSION_DATE
,(SELECT FND_FLEX_EXT.GET_SEGS(APPLICATION_SHORT_NAME => 'PAY',KEY_FLEX_CODE => (SELECT KEY_FLEXFIELD_CODE FROM FND_KF_STR_INSTANCES_VL WHERE STRUCTURE_INSTANCE_NUMBER= ID_FLEX_NUM),STRUCTURE_NUMBER =>
	ID_FLEX_NUM,COMBINATION_ID => COST_ALLOCATION_KEYFLEX_ID) FROM PAY_COST_ALLOC_ACCOUNTS WHERE COST_ALLOCATION_RECORD_ID = payCOSTALLEO.COST_ALLOCATION_RECORD_ID AND SOURCE_SUB_TYPE = 'SUSP') RES_SUSPENSE_ACCOUNT
,(SELECT FND_FLEX_EXT.GET_SEGS(APPLICATION_SHORT_NAME => 'PAY',KEY_FLEX_CODE => (SELECT KEY_FLEXFIELD_CODE FROM FND_KF_STR_INSTANCES_VL WHERE STRUCTURE_INSTANCE_NUMBER= ID_FLEX_NUM),STRUCTURE_NUMBER =>
	ID_FLEX_NUM,COMBINATION_ID => COST_ALLOCATION_KEYFLEX_ID) FROM PAY_COST_ALLOC_ACCOUNTS WHERE COST_ALLOCATION_RECORD_ID = payCOSTALLEO.COST_ALLOCATION_RECORD_ID AND SOURCE_SUB_TYPE = 'DFLT') RES_DEFAULT_ACCOUNT

,payALLPREO.LAST_UPDATED_BY  RSC_LAST_UPDATED_BY
,payALLPREO.LAST_UPDATE_DATE  RSC_LAST_UPDATE_DATE
,payALLPREO.CREATED_BY  RSC_CREATED_BY
,payALLPREO.CREATION_DATE  RSC_CREATION_DATE
,NULL RSC_LEDGER_ID
,NULL RSC_CHART_OF_ACCOUNTS_ID
,NULL RSC_BUSINESS_UNIT_ID
,NULL RSC_LEGAL_ENTITY_ID
,NULL RSC_ORGANIZATION_ID
,NULL RSC_BUSINESS_GROUP_ID
,NULL RSC_ENTERPRISE_ID
,NULL RSC_COUNTRY_ID

FROM PAY_ALL_PAYROLLS_F payALLPREO
,(SELECT PAYROLL_ID,EFFECTIVE_START_DATE,CUTOFF_FIXED_DATE,EARN_FIXED_DATE,PROCESS_FIXED_DATE,PAYDATE_FIXED_DATE,PAYSLIP_FIXED_DATE,PROCESS_SUB_FIXED_DATE
	FROM PAY_ALL_PAYROLLS_F WHERE FIXED_DATE = 'Y') PAYTMP
,PAY_COST_ALLOCATIONS_F payCOSTALLEO
WHERE payALLPREO.PAYROLL_ID = payCOSTALLEO.SOURCE_ID (+)
AND payALLPREO.PAYROLL_ID = PAYTMP.PAYROLL_ID(+)
AND payALLPREO.EFFECTIVE_START_DATE = PAYTMP.EFFECTIVE_START_DATE(+)
