/* ****************************************************************************
 * $Revision: 74208 $:
 * $Author: pisan.jariyasettachok $:
 * $Date: 2020-06-03 19:08:12 +0700 (Wed, 03 Jun 2020) $:
 * $HeadURL: http://svn01.rapidesuite.com:999/svn/a/dev/rapidesuite/controldata/FUSION_11.1.13.20/branches/core/v2.2.3.0.B/reverse_sql/FINANCIALS/Manage%20AutoPost%20Criteria%20Sets%20-%20AutoPost%20Criteria.sql $:
 * $Id: Manage AutoPost Criteria Sets - AutoPost Criteria.sql 74208 2020-06-03 12:08:12Z pisan.jariyasettachok $:
 * ****************************************************************************
 * Description:
 * ************************************************************************** */

--RSC_PREREQUISITE_OBJECTS=GMS_AWARD_TEMPLATES_VL
--RSC_PREREQUISITE_OBJECTS=GMS_FUNDING_SOURCES_VL 


SELECT gmsAWARDTEMPE0.TEMPLATE_NAME RES_TEMPLATE_NAME
,gmsAWARDTEMPE0.TEMPLATE_NUMBER RES_TEMPLATE_NUMBER
,(CASE WHEN gmsFUNDSOURCEE0.FUNDING_SOURCE_NAME IS NULL 
	THEN gmsFUNDSOURCEE0.FUNDING_SOURCE_NUMBER
	ELSE gmsFUNDSOURCEE0.FUNDING_SOURCE_NAME END)RES_NAME
,gmsFUNDSOURCEE0.FUNDING_SOURCE_NUMBER RES_NUMBER
,DECODE(gmsAWARDFUNDSOURCEE0.REQUIRED_BY_SPONSOR,'Y','Yes','No') RES_REQUIRED_BY_SPONSOR
,(SELECT DISPLAY_NAME
	FROM PER_PERSON_NAMES_F
	WHERE NAME_TYPE = 'GLOBAL'
	AND PERSON_ID = gmsAWARDFUNDSOURCEE0.APPROVAL_PERSON_ID
	AND SYSDATE BETWEEN EFFECTIVE_START_DATE AND EFFECTIVE_END_DATE
	) RES_APPROVED_BY
,TO_CHAR(gmsAWARDFUNDSOURCEE0.APPROVAL_DATE,'DD-Mon-YYYY') RES_APPROVED_DATE

,gmsAWARDFUNDSOURCEE0.LAST_UPDATED_BY RSC_LAST_UPDATED_BY
,gmsAWARDFUNDSOURCEE0.LAST_UPDATE_DATE RSC_LAST_UPDATE_DATE
,gmsAWARDFUNDSOURCEE0.CREATED_BY RSC_CREATED_BY
,gmsAWARDFUNDSOURCEE0.CREATION_DATE RSC_CREATION_DATE
,null RSC_LEDGER_ID
,null RSC_CHART_OF_ACCOUNTS_ID
,null RSC_BUSINESS_UNIT_ID
,null RSC_LEGAL_ENTITY_ID
,null RSC_ORGANIZATION_ID
,null RSC_BUSINESS_GROUP_ID
,NULL RSC_ENTERPRISE_ID
,NULL RSC_COUNTRY_ID

FROM GMS_AWARD_TEMPLATES_VL gmsAWARDTEMPE0
,GMS_AWARD_HEADERS_B gmsAWARDHEABE0
,GMS_AWARD_FUNDING_SOURCES_B gmsAWARDFUNDSOURCEE0
,GMS_FUNDING_SOURCES_VL gmsFUNDSOURCEE0
WHERE gmsAWARDTEMPE0.AWARD_HEADER_ID = gmsAWARDHEABE0.ID
AND gmsAWARDHEABE0.ID = gmsAWARDFUNDSOURCEE0.AWARD_ID
AND gmsAWARDFUNDSOURCEE0.FUNDING_SOURCE_ID = gmsFUNDSOURCEE0.FUNDING_SOURCE_ID
AND gmsFUNDSOURCEE0.TYPE NOT IN ('S')
ORDER BY gmsAWARDTEMPE0.TEMPLATE_NAME