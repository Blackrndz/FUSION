/* ****************************************************************************
* $Revision: 72658 $:
* $Author: tanawat.wongjan $:
* $Date: 2019-10-01 15:00:45 +0700 (Tue, 01 Oct 2019) $:
* $HeadURL: http://svn01.rapidesuite.com:999/svn/a/dev/rapidesuite/controldata/FUSION_11.1.9/trunk/core/reverse_sql/
FINANCIALS/Manage%20SCM%20Common%20Value%20Sets%20-%20Manage%20SCM%20Common%20Value%20Sets.sql $:
* $Id: Manage SCM Common Value Sets - Manage SCM Common Value Sets.sql 55804 2016-06-09 04:17:45Z wuttipong.thongvises
$:
* ****************************************************************************
* Description:
* ************************************************************************** */

-- RSC_PREREQUISITE_OBJECTS=CMP_TCS_CAT_VL

SELECT compCatsE0.NAME RES_CATEGORY_NAME
,(CASE
	WHEN compCatsE0.LEVEL_OF_DETAIL = 'CMP_TCS_COLS_TIME_OFF' THEN
		(SELECT MEANING
			FROM FND_LOOKUP_VALUES
			WHERE LANGUAGE = USERENV('LANG')
			AND LOOKUP_TYPE = 'CMP_TCS_LEVEL_OF_DETAIL'
			AND LOOKUP_CODE = compCatsE0.LEVEL_OF_DETAIL)
	END) RES_LEVEL_OF_DETAIL
,detailsE0.DISPLAY_NAME RES_NAME
,(SELECT (SELECT MEANING
		FROM FND_LOOKUP_VALUES
		WHERE LANGUAGE = USERENV('LANG')
		AND LOOKUP_TYPE = 'CMP_TCS_CATEGORY_TYPE'
		AND LOOKUP_CODE = CAT_TYPE_CD)
    FROM CMP_TCS_CAT_VL
    WHERE CAT_ID = detailsE0.SUBCAT_ID
    ) RES_SUBCATEGORY_CATEGORY_TYPE
,'' RES_DATE
,detailsE0.DESCRIPTION RES_DESCRIPTION
,YCE0.NAME RES_YOUR_CONTRIBUTION
,CCE0.NAME RES_COMPANY_CONTRIBUTION
,'' RES_JOB
,(SELECT NAME
    FROM CMP_TCS_CAT_TL
    WHERE LANGUAGE = USERENV('LANG')
    AND CAT_ID = detailsE0.SUBCAT_ID
    ) RES_SUBCATEGORY
,'' RES_DISPLAY_ZERO_ROW
,TFE0.NAME RES_TIME_OFF
,MVE0.NAME RES_MONETARY_VALUE
,ABE0.NAME RES_ACCRUED_BALANCE
,detailsE0.URL RES_DISPLAY_NAME_URL
,detailsE0.LAST_UPDATED_BY RSC_LAST_UPDATED_BY
,detailsE0.LAST_UPDATE_DATE RSC_LAST_UPDATE_DATE
,detailsE0.CREATED_BY RSC_CREATED_BY
,detailsE0.CREATION_DATE RSC_CREATION_DATE
,NULL RSC_LEDGER_ID
,NULL RSC_CHART_OF_ACCOUNTS_ID
,NULL RSC_BUSINESS_UNIT_ID
,NULL RSC_LEGAL_ENTITY_ID
,NULL RSC_ORGANIZATION_ID
,NULL RSC_BUSINESS_GROUP_ID
,NULL RSC_ENTERPRISE_ID
,NULL RSC_COUNTRY_ID

FROM CMP_TCS_CAT_VL compCatsE0
,CMP_TCS_ROW_IN_CAT_VL detailsE0
,(SELECT allObjsE0.ROW_IN_CAT_ID
    ,itemsE0.*
    ,inputsE0.ELEMENT_TYPE_ID
    ,inputsE0.NAME INPUT_NAME
    FROM CMP_TCS_ALL_OBJECTS_IN_CAT allObjsE0
    ,CMP_TCS_COL_IN_CAT colsE0
    ,CMP_TCS_ITEM_VL itemsE0
    ,PAY_INPUT_VALUES_VL inputsE0
    WHERE allObjsE0.COL_IN_CAT_ID = colsE0.COL_IN_CAT_ID
    AND allObjsE0.ITEM_ID = itemsE0.ITEM_ID
    AND colsE0.COLUMN_TYPE_CD = 'EEC_CNTRB'
    AND colsE0.CONTRIBUTOR_TYPE_CD = 'EECNTRB'
    AND itemsE0.SOURCE_KEY = inputsE0.INPUT_VALUE_ID(+)
    ) YCE0
,(SELECT allObjsE0.ROW_IN_CAT_ID
    ,itemsE0.*
    ,inputsE0.ELEMENT_TYPE_ID
    ,inputsE0.NAME INPUT_NAME
    FROM CMP_TCS_ALL_OBJECTS_IN_CAT allObjsE0
    ,CMP_TCS_COL_IN_CAT colsE0
    ,CMP_TCS_ITEM_VL itemsE0
    ,PAY_INPUT_VALUES_VL inputsE0
    WHERE allObjsE0.COL_IN_CAT_ID = colsE0.COL_IN_CAT_ID
    AND allObjsE0.ITEM_ID = itemsE0.ITEM_ID
    AND colsE0.COLUMN_TYPE_CD = 'ERC_CNTRB'
    AND colsE0.CONTRIBUTOR_TYPE_CD = 'CMPYCNTRB'
    AND itemsE0.SOURCE_KEY = inputsE0.INPUT_VALUE_ID(+)
    ) CCE0
,(SELECT allObjsE0.ROW_IN_CAT_ID
    ,itemsE0.*
    ,inputsE0.ELEMENT_TYPE_ID
    ,inputsE0.NAME INPUT_NAME
    FROM CMP_TCS_ALL_OBJECTS_IN_CAT allObjsE0
    ,CMP_TCS_COL_IN_CAT colsE0
    ,CMP_TCS_ITEM_VL itemsE0
    ,PAY_INPUT_VALUES_VL inputsE0
    WHERE allObjsE0.COL_IN_CAT_ID = colsE0.COL_IN_CAT_ID
    AND allObjsE0.ITEM_ID = itemsE0.ITEM_ID
    AND colsE0.COLUMN_TYPE_CD = 'TMOFF'
    AND itemsE0.SOURCE_KEY = inputsE0.INPUT_VALUE_ID(+)
    ) TFE0
,(SELECT allObjsE0.ROW_IN_CAT_ID
    ,itemsE0.*
    ,inputsE0.ELEMENT_TYPE_ID
    ,inputsE0.NAME INPUT_NAME
    FROM CMP_TCS_ALL_OBJECTS_IN_CAT allObjsE0
    ,CMP_TCS_COL_IN_CAT colsE0
    ,CMP_TCS_ITEM_VL itemsE0
    ,PAY_INPUT_VALUES_VL inputsE0
    WHERE allObjsE0.COL_IN_CAT_ID = colsE0.COL_IN_CAT_ID
    AND allObjsE0.ITEM_ID = itemsE0.ITEM_ID
    AND colsE0.COLUMN_TYPE_CD = 'MNTRYVAL'
    AND itemsE0.SOURCE_KEY = inputsE0.INPUT_VALUE_ID(+)
    ) MVE0
,(SELECT allObjsE0.ROW_IN_CAT_ID
    ,itemsE0.*
    ,inputsE0.ELEMENT_TYPE_ID
    ,inputsE0.NAME INPUT_NAME
    FROM CMP_TCS_ALL_OBJECTS_IN_CAT allObjsE0
    ,CMP_TCS_COL_IN_CAT colsE0
    ,CMP_TCS_ITEM_VL itemsE0
    ,PAY_INPUT_VALUES_VL inputsE0
    WHERE allObjsE0.COL_IN_CAT_ID = colsE0.COL_IN_CAT_ID
    AND allObjsE0.ITEM_ID = itemsE0.ITEM_ID
    AND colsE0.COLUMN_TYPE_CD = 'ACCRUEDBAL'
    AND itemsE0.SOURCE_KEY = inputsE0.INPUT_VALUE_ID(+)
    ) ABE0
WHERE compCatsE0.CAT_TYPE_CD NOT LIKE '%SECTION'
AND compCatsE0.CAT_ID = detailsE0.CAT_ID
AND detailsE0.ROW_IN_CAT_ID = YCE0.ROW_IN_CAT_ID(+)
AND detailsE0.ROW_IN_CAT_ID = CCE0.ROW_IN_CAT_ID(+)
AND detailsE0.ROW_IN_CAT_ID = TFE0.ROW_IN_CAT_ID(+)
AND detailsE0.ROW_IN_CAT_ID = MVE0.ROW_IN_CAT_ID(+)
AND detailsE0.ROW_IN_CAT_ID = ABE0.ROW_IN_CAT_ID(+)
ORDER BY compCatsE0.NAME
,detailsE0.ORDR_NUM