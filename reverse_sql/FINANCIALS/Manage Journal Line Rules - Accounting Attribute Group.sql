/* ****************************************************************************
 * $Revision: 50638 $:
 * $Author: wuttipong.thongvises $:
 * $Date: 2015-11-18 14:55:09 +0700 (Wed, 18 Nov 2015) $:
 * $HeadURL: http://svn01.rapidesuite.com:999/svn/a/dev/rapidesuite/controldata/FUSION_11.1.9/trunk/core/reverse_sql/FINANCIALS/Manage%20Cumulative%20Mileage%20Determinants%20-%20Manage%20Cumulative%20Mileage%20Determinants.sql $:
 * $Id: Manage Cumulative Mileage Determinants - Manage Cumulative Mileage Determinants.sql 50638 2015-11-18 07:55:09Z wuttipong.thongvises $:
 * ****************************************************************************
 * Description:
 * ************************************************************************** */
 

SELECT DISTINCT (SELECT APPLICATION_NAME
	FROM XLA_SUBLEDGERS_TL
	WHERE LANGUAGE = USERENV('LANG')
	AND APPLICATION_ID = JELineRulesE0.APPLICATION_ID
	) RES_SUBLEDGER_APPLICATION
,JELineRulesE0.NAME RES_NAME
,(SELECT NAME
	FROM XLA_EVENT_CLASSES_TL
	WHERE ENTITY_CODE = JELineRulesE0.ENTITY_CODE
	AND EVENT_CLASS_CODE = JELineRulesE0.EVENT_CLASS_CODE
	AND APPLICATION_ID = JELineRulesE0.APPLICATION_ID
	AND LANGUAGE = USERENV('LANG')
	) RES_EVENT_CLASS
,(SELECT MEANING 
	FROM XLA_LOOKUPS
	WHERE LOOKUP_TYPE = 'XLA_ACCT_ATTR_ASSGN_GROUP'
	AND LOOKUP_CODE = AttributesE0.ASSIGNMENT_GROUP_CODE
	) RES_ACCOUNTING_ATTRIBUTE_GROUP
,JELineRulesE0.LAST_UPDATED_BY RSC_LAST_UPDATED_BY
,JELineRulesE0.LAST_UPDATE_DATE RSC_LAST_UPDATE_DATE
,JELineRulesE0.CREATED_BY RSC_CREATED_BY
,JELineRulesE0.CREATION_DATE RSC_CREATION_DATE
,NULL RSC_LEDGER_ID
,NULL RSC_CHART_OF_ACCOUNTS_ID
,NULL RSC_BUSINESS_UNIT_ID
,NULL RSC_LEGAL_ENTITY_ID
,NULL RSC_ORGANIZATION_ID
,NULL RSC_BUSINESS_GROUP_ID
,NULL RSC_ENTERPRISE_ID
,NULL RSC_COUNTRY_ID

FROM XLA_ACCT_LINE_TYPES_VL JELineRulesE0
,XLA_JLT_ACCT_ATTRS AccAttributesE0
,XLA_ACCT_ATTRIBUTES_VL AttributesE0
WHERE JELineRulesE0.AMB_CONTEXT_CODE = AccAttributesE0.AMB_CONTEXT_CODE
AND JELineRulesE0.APPLICATION_ID = AccAttributesE0.APPLICATION_ID
AND JELineRulesE0.EVENT_CLASS_CODE = AccAttributesE0.EVENT_CLASS_CODE
AND JELineRulesE0.ACCOUNTING_LINE_TYPE_CODE = AccAttributesE0.ACCOUNTING_LINE_TYPE_CODE
AND JELineRulesE0.ACCOUNTING_LINE_CODE = AccAttributesE0.ACCOUNTING_LINE_CODE
AND AccAttributesE0.ACCOUNTING_ATTRIBUTE_CODE = AttributesE0.ACCOUNTING_ATTRIBUTE_CODE
AND AttributesE0.ASSIGNMENT_GROUP_CODE != 'BUSINESS_FLOW'

UNION ALL

SELECT DISTINCT (SELECT APPLICATION_NAME
	FROM XLA_SUBLEDGERS_TL
	WHERE LANGUAGE = USERENV('LANG')
	AND APPLICATION_ID = JELineRulesE0.APPLICATION_ID
	) RES_SUBLEDGER_APPLICATION
,JELineRulesE0.NAME RES_NAME
,(SELECT NAME
	FROM XLA_EVENT_CLASSES_TL
	WHERE ENTITY_CODE = JELineRulesE0.ENTITY_CODE
	AND EVENT_CLASS_CODE = JELineRulesE0.EVENT_CLASS_CODE
	AND APPLICATION_ID = JELineRulesE0.APPLICATION_ID
	AND LANGUAGE = USERENV('LANG')
	) RES_EVENT_CLASS
,(SELECT MEANING 
	FROM XLA_LOOKUPS
	WHERE LOOKUP_TYPE = 'XLA_ACCT_ATTR_ASSGN_GROUP'
	AND LOOKUP_CODE = AttributesE0.ASSIGNMENT_GROUP_CODE
	) RES_ACCOUNTING_ATTRIBUTE_GROUP
,JELineRulesE0.LAST_UPDATED_BY RSC_LAST_UPDATED_BY
,JELineRulesE0.LAST_UPDATE_DATE RSC_LAST_UPDATE_DATE
,JELineRulesE0.CREATED_BY RSC_CREATED_BY
,JELineRulesE0.CREATION_DATE RSC_CREATION_DATE
,NULL RSC_LEDGER_ID
,NULL RSC_CHART_OF_ACCOUNTS_ID
,NULL RSC_BUSINESS_UNIT_ID
,NULL RSC_LEGAL_ENTITY_ID
,NULL RSC_ORGANIZATION_ID
,NULL RSC_BUSINESS_GROUP_ID
,NULL RSC_ENTERPRISE_ID
,NULL RSC_COUNTRY_ID

FROM XLA_ACCT_LINE_TYPES_VL JELineRulesE0
,XLA_JLT_ACCT_ATTRS AccAttributesE0
,XLA_ACCT_ATTRIBUTES_VL AttributesE0
WHERE JELineRulesE0.AMB_CONTEXT_CODE = AccAttributesE0.AMB_CONTEXT_CODE
AND JELineRulesE0.APPLICATION_ID = AccAttributesE0.APPLICATION_ID
AND JELineRulesE0.EVENT_CLASS_CODE = AccAttributesE0.EVENT_CLASS_CODE
AND JELineRulesE0.ACCOUNTING_LINE_TYPE_CODE = AccAttributesE0.ACCOUNTING_LINE_TYPE_CODE
AND JELineRulesE0.ACCOUNTING_LINE_CODE = AccAttributesE0.ACCOUNTING_LINE_CODE
AND AccAttributesE0.ACCOUNTING_ATTRIBUTE_CODE = AttributesE0.ACCOUNTING_ATTRIBUTE_CODE
AND AttributesE0.ASSIGNMENT_GROUP_CODE = 'BUSINESS_FLOW'
AND JELineRulesE0.BUSINESS_METHOD_CODE = 'PRIOR_ENTRY'

ORDER BY 1,2,3