/* ****************************************************************************
 * $Revision: 78229 $:
 * $Author: pisan.jariyasettachok $:
 * $Date: 2022-04-07 14:37:05 +0700 (Thu, 07 Apr 2022) $:
 * $HeadURL: http://svn01.rapidesuite.com:999/svn/a/dev/rapidesuite/controldata/FUSION_11.1.13/trunk/core/reverse_sql/FINANCIALS/Manage%20Policies%20by%20Expense%20Category%20-%20Mileage.sql $:
 * $Id: Manage Policies by Expense Category - Mileage.sql 78229 2022-04-07 07:37:05Z pisan.jariyasettachok $:
 * ****************************************************************************
 * Description:
 * ************************************************************************** */
 
-- RSC_PREREQUISITE_OBJECTS=EXM_MILEAGE_POLICIES

SELECT xlaANAE0.NAME RES_NAME
,(SELECT APPLICATION_NAME
	FROM XLA_SUBLEDGERS_TL
	WHERE LANGUAGE = USERENV('LANG')
	AND APPLICATION_ID = xlaANASOUE0.SOURCE_APPLICATION_ID
	)  RES_SUBLEDGER_APPLICATION
,(SELECT NAME 
	FROM XLA_EVENT_CLASSES_TL
	WHERE EVENT_CLASS_CODE = xlaANASOUE0.EVENT_CLASS_CODE
	AND APPLICATION_ID = xlaANASOUE0.SOURCE_APPLICATION_ID
	AND LANGUAGE = USERENV('LANG')
	) RES_EVENT_CLASS
,(SELECT MEANING FROM FND_LOOKUP_VALUES WHERE LOOKUP_CODE = xlaANASOUE0.SOURCE_TYPE_CODE 
	AND LOOKUP_TYPE = 'XLA_SOURCE_TYPE' AND LANGUAGE = USERENV('LANG')) RES_SOURCE_TYPE
,(CASE WHEN xlaANASOUE0.SOURCE_TYPE_CODE = 'F' THEN
	(SELECT NAME 
			FROM XLA_FORMULAS_VL
			WHERE APPLICATION_ID = xlaANASOUE0.SOURCE_APPLICATION_ID
			AND FORMULA_ORIGIN_CODE = xlaANASOUE0.SOURCE_ORIGIN_CODE
			AND FORMULA_CODE = xlaANASOUE0.SOURCE_CODE)
	ELSE
	(SELECT NAME 
		FROM XLA_SOURCES_TL
		WHERE APPLICATION_ID = xlaANASOUE0.SOURCE_APPLICATION_ID
		AND SOURCE_TYPE_CODE = xlaANASOUE0.SOURCE_TYPE_CODE
		AND SOURCE_CODE = xlaANASOUE0.SOURCE_CODE
		AND LANGUAGE = USERENV('LANG')
	) END) RES_SOURCE

,xlaANASOUE0.LAST_UPDATED_BY RSC_LAST_UPDATED_BY
,xlaANASOUE0.LAST_UPDATE_DATE RSC_LAST_UPDATE_DATE
,xlaANASOUE0.CREATED_BY RSC_CREATED_BY
,xlaANASOUE0.CREATION_DATE RSC_CREATION_DATE
,NULL RSC_LEDGER_ID
,NULL RSC_CHART_OF_ACCOUNTS_ID
,NULL RSC_BUSINESS_UNIT_ID
,NULL RSC_LEGAL_ENTITY_ID
,NULL RSC_ORGANIZATION_ID
,NULL RSC_BUSINESS_GROUP_ID
,NULL RSC_ENTERPRISE_ID
,NULL RSC_COUNTRY_ID

FROM XLA_ANALYTICAL_HDRS_VL xlaANAE0
,XLA_ANALYTICAL_SOURCES xlaANASOUE0
WHERE xlaANAE0.ANALYTICAL_CRITERION_CODE = xlaANASOUE0.ANALYTICAL_CRITERION_CODE
AND xlaANAE0.ANALYTICAL_CRITERION_TYPE_CODE = xlaANASOUE0.ANALYTICAL_CRITERION_TYPE_CODE
AND xlaANAE0.BALANCING_FLAG = 'Y'
ORDER BY xlaANAE0.NAME