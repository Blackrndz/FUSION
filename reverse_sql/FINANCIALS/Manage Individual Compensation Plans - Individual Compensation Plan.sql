/* ****************************************************************************
 * $Revision: 78229 $:
 * $Author: pisan.jariyasettachok $:
 * $Date: 2022-04-07 14:37:05 +0700 (Thu, 07 Apr 2022) $:
 * $HeadURL: https://svn03.rapid4cloud.com/svn/a/dev/rapidesuite/controldata/FUSION_11.1.13/trunk/core/reverse_sql/FINANCIALS/Manage%20Individual%20Compensation%20Plans%20-%20Individual%20Compensation%20Plan.sql $:
 * $Id: Manage Individual Compensation Plans - Individual Compensation Plan.sql 78229 2022-04-07 07:37:05Z pisan.jariyasettachok $:
 * ****************************************************************************
 * Description:
 * ************************************************************************** */
 
/*<RSC_PRE_STEPS_LARGE_COLUMN_POSITION>12</RSC_PRE_STEPS_LARGE_COLUMN_POSITION>
	
-- The column position that using special data type.
 <RSC_PRE_STEPS_LARGE_COLUMN_TYPE>LONG</RSC_PRE_STEPS_LARGE_COLUMN_TYPE>

-- Specify what type of the data.
*/

-- REPLACE_HTML_KEYWORD = RES_INSTRUCTION_TEXT

 
SELECT cmpPLANEO.PLAN_NAME RES_PLAN
,(SELECT MEANING 
	FROM FND_LOOKUP_VALUES 
	WHERE LOOKUP_CODE = cmpPLANEO.STATUS_CODE
	AND LOOKUP_TYPE = 'CMP_PLAN_STATUS' 
	AND LANGUAGE = USERENV('LANG')
	AND SYSDATE BETWEEN START_DATE_ACTIVE AND NVL(END_DATE_ACTIVE ,TO_DATE('31-12-4712','DD-MM-YYYY'))
	) RES_STATUS
,(SELECT MEANING 
	FROM FND_LOOKUP_VALUES 
	WHERE LOOKUP_CODE = cmpPLANEO.START_DATE_CODE
	AND LOOKUP_TYPE = 'CMP_START_DATE' 
	AND LANGUAGE = USERENV('LANG')
	AND SYSDATE BETWEEN START_DATE_ACTIVE AND NVL(END_DATE_ACTIVE ,TO_DATE('31-12-4712','DD-MM-YYYY'))
	) RES_PAYMENT_START_DATE
,(CASE
	WHEN cmpPLANEO.START_DATE_CODE = 'FIXED_DATE' THEN
		TO_CHAR(cmpPLANEO.START_DATE_EXTRA_INFO,'DD-Mon-YYYY')
	END) RES_PAYMENT_START_DATE_DATE
,(CASE
	WHEN cmpPLANEO.START_DATE_CODE IN ('NEXT_DATE_OCCURRENCE','NEXT_MONTH_DATE_OCCURRENCE') THEN
		cmpPLANEO.START_DATE_TEXT
	END) RES_PAYMENT_START_DATE_DAY
,(CASE
	WHEN cmpPLANEO.START_DATE_CODE = 'NEXT_MONTH_DATE_OCCURRENCE' THEN
		(SELECT MEANING 
			FROM FND_LOOKUP_VALUES 
			WHERE LANGUAGE = USERENV('LANG')
			AND LOOKUP_TYPE = 'MONTH' 
			AND LOOKUP_CODE = TO_CHAR(cmpPLANEO.START_DATE_EXTRA_INFO,'MM'))
	END) RES_PAYMENT_START_DATE_MONTH
,(SELECT MEANING 
	FROM FND_LOOKUP_VALUES 
	WHERE LOOKUP_CODE = cmpPLANEO.END_DATE_CODE
	AND LOOKUP_TYPE = 'CMP_END_DATE' 
	AND LANGUAGE = USERENV('LANG')
	AND SYSDATE BETWEEN START_DATE_ACTIVE AND NVL(END_DATE_ACTIVE ,TO_DATE('31-12-4712','DD-MM-YYYY'))
	) RES_PAYMENT_END_DATE
,(CASE
	WHEN cmpPLANEO.END_DATE_CODE = 'FIXED_DATE' THEN
		TO_CHAR(cmpPLANEO.END_DATE_EXTRA_INFO,'DD-Mon-YYYY')
	END) RES_PAYMENT_END_DATE_DATE
,(CASE
	WHEN cmpPLANEO.END_DATE_CODE IN ('NEXT_DATE_OCCURRENCE','NEXT_MONTH_DATE_OCCURRENCE') THEN
		cmpPLANEO.END_DATE_TEXT
	END) RES_PAYMENT_END_DATE_DAY
,(CASE
	WHEN cmpPLANEO.END_DATE_CODE = 'NEXT_MONTH_DATE_OCCURRENCE' THEN
		(SELECT MEANING 
			FROM FND_LOOKUP_VALUES 
			WHERE LANGUAGE = USERENV('LANG')
			AND LOOKUP_TYPE = 'MONTH' 
			AND LOOKUP_CODE = TO_CHAR(cmpPLANEO.END_DATE_EXTRA_INFO,'MM'))
	END) RES_PAYMENT_END_DATE_MONTH
,DECODE(cmpPLANEO.PLAN_SECURITY_ENABLED_FLAG,'Y','Yes','No') RES_RESTRICT_PLAN_ACCESS
,(SELECT MEANING 
	FROM FND_LOOKUP_VALUES 
	WHERE LOOKUP_CODE = cmpINSTRUCEO.INSTRUCTION_TYPE 
	AND LOOKUP_TYPE = 'ORA_CMP_IC_PLANINFO_VISIBILITY' 
	AND LANGUAGE = USERENV('LANG')
	AND SYSDATE BETWEEN START_DATE_ACTIVE AND NVL(END_DATE_ACTIVE ,TO_DATE('31-12-4712','DD-MM-YYYY'))
	) RES_DEFAULT_VISIBILITY
,REPLACE(REPLACE(REPLACE(cmpINSTRUCEO.INSTRUCTION_TEXT,'&','#AMP#'),'<','#OPENTAG#'),'>','#CLOSETAG#') RES_INSTRUCTION_TEXT

,cmpPLANEO.LAST_UPDATED_BY RSC_LAST_UPDATED_BY
,cmpPLANEO.LAST_UPDATE_DATE RSC_LAST_UPDATE_DATE
,cmpPLANEO.CREATED_BY RSC_CREATED_BY
,cmpPLANEO.CREATION_DATE RSC_CREATION_DATE
,NULL RSC_LEDGER_ID
,NULL RSC_CHART_OF_ACCOUNTS_ID
,NULL RSC_BUSINESS_UNIT_ID
,NULL RSC_LEGAL_ENTITY_ID
,NULL RSC_ORGANIZATION_ID
,NULL RSC_BUSINESS_GROUP_ID
,NULL RSC_ENTERPRISE_ID
,NULL RSC_COUNTRY_ID

FROM CMP_PLANS_VL cmpPLANEO
,CMP_INSTRUCTIONS_VL cmpINSTRUCEO
WHERE cmpPLANEO.COMP_TYPE = 'ICD'
AND cmpINSTRUCEO.COMP_TYPE = 'ICD'
AND cmpPLANEO.PLAN_ID = cmpINSTRUCEO.INSTRUCTION_KEY
ORDER BY cmpPLANEO.PLAN_NAME