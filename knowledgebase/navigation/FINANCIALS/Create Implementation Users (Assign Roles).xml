<?xml version="1.0"?>
<navigation xmlns="http://navigation0005.configurator.erapidsuite.com" xmlns:xsd="http://xsdutility.configurator.erapidsuite.com">
    <name>Create Implementation Users (Assign Roles)</name>
    <svn>
        <xsd:revision>$Revision: 79875 $:</xsd:revision>
        <xsd:author>$Author: john.martin $:</xsd:author>
        <xsd:date>$Date: 2022-12-27 15:24:30 +0700 (Tue, 27 Dec 2022) $:</xsd:date>
        <xsd:headURL>$HeadURL: https://svn03.rapid4cloud.com/svn/a/dev/rapidesuite/controldata/FUSION_11.1.13/trunk/core/knowledgebase/navigation/FINANCIALS/Create%20Implementation%20Users%20(Assign%20Roles).xml $:</xsd:headURL>
        <xsd:id>$Id: Create Implementation Users (Assign Roles).xml 79875 2022-12-27 08:24:30Z john.martin $:</xsd:id>
    </svn>
    <description/>
    <type>FUSION</type>
    <engine_type>SELENIUM</engine_type>
    <modules/>
    <mapper_use_type>UNDEFINED</mapper_use_type>
    <validate_parent_child_relationships_for_mapped_data>true</validate_parent_child_relationships_for_mapped_data>
    <fusionNavigation hasScope="false"
        isBatchingBasedOnRootInventoryUniqueRecords="true"
        taskName="Create Implementation Users" isBatchingAllowed="true" applicationKey="APPLICATION_HOME_PAGE">
        <dependencies>
            <navigation name="Manage Users"/>
			<navigation name="Create Implementation Users"/>
        </dependencies>
        <parameters>
            <parameter name="Repeat_1" value="Create Implementation Users - User Information"/>
            <parameter name="Repeat_2" value="Create Implementation Users - Roles"/>
        </parameters>
		<!-- Repeat_1-->
		<block name="Tab_User">
            <IfThenElse>
                <if>
                    <findElement highlightTurnedOff="true" by="xpath">//div[contains(@class,'Select')]//div[@title='Users']</findElement>
                </if>
                <then/>
                <else>
                    <findElement by="xpath">//div[@title='Users']/a</findElement>
                    <click waitForPageToFinishRendering="true"/>
                </else>
            </IfThenElse>
        </block>
		<block name="Edit_Button">
            <findElement by="xpath">//button[text()='Edit']</findElement>
            <click waitForPageToFinishRendering="true"/>
			<pause durationInSecs="2"/>
        </block>
		<block name="Search_User">
            <IfThenElse>
                <if>
                    <comparisons separator="AND">
                        <comparison operator="NOT_EQUAL">
                            <leftOperand>
                                <valueKB inventoryName="Repeat_1" columnName="User Name"/>
                            </leftOperand>
                            <rightOperand>
                                <valueText/>
                            </rightOperand>
                        </comparison>
                    </comparisons>
                </if>
                <then>
                    <findElement by="xpath">//label[text()='Search']/..//input</findElement>
                    <sendKeys isClear="true" isENTERKey="true" waitForPageToFinishRendering="true">
                        <valueKB inventoryName="Repeat_1" columnName="User Name"/>
                    </sendKeys>
                    <findElement by="xpath">//label[text()='Search']/../../..//a[@title='Search']</findElement>
                    <click waitForPageToFinishRendering="true"/>
                    <IfThenElse>
                        <if>
                            <findElement by="xpath">//table[@summary='Users']//label[text()='User Login']/../..//a[text()='<valueKB inventoryName="Repeat_1" columnName="User Name"/>']</findElement>
                        </if>
                        <then>
                            <findElement by="xpath">//table[@summary='Users']//label[text()='User Login']/../..//a[text()='<valueKB inventoryName="Repeat_1" columnName="User Name"/>']</findElement>
                            <click waitForPageToFinishRendering="true"/>
                            <executeBlock name="Edit_Button"/>
                            <executeBlock name="User_Information"/>
                        </then>
                        <else>
							<IfThenElse>
								<if>
									<findElement by="xpath">//table[@summary='Users']//label[text()='User Name']/../..//a[text()='<valueKB inventoryName="Repeat_1" columnName="User Name"/>']</findElement>
								</if>
								<then>
									<findElement by="xpath">//table[@summary='Users']//label[text()='User Name']/../..//a[text()='<valueKB inventoryName="Repeat_1" columnName="User Name"/>']</findElement>
									<click waitForPageToFinishRendering="true"/>
									<executeBlock name="Edit_Button"/>
									<executeBlock name="User_Information"/>
								</then>
								<else>
									<IfThenElse>
										<if>
											<findElement by="xpath">//table[@summary='Users']//label[text()='User']/../..//a[text()='<valueKB inventoryName="Repeat_1" columnName="User Name"/>']</findElement>
										</if>
										<then>
											<findElement by="xpath">//table[@summary='Users']//label[text()='User']/../..//a[text()='<valueKB inventoryName="Repeat_1" columnName="User Name"/>']</findElement>
											<click waitForPageToFinishRendering="true"/>
											<executeBlock name="Edit_Button"/>
											<executeBlock name="User_Information"/>
										</then>
										<else>
											<error message="No data found. Please create data in 'Create Implementation Users'."/>
										</else>
									</IfThenElse>
								</else>
							</IfThenElse>
                        </else>
                    </IfThenElse>
                </then>
                <else>
                    <error message="'User Name' is required."/>
                </else>
            </IfThenElse>
        </block>
		<block name="User_Information">
            <!-- First Name -->
            <IfThenElse>
                <if>
                    <comparisons separator="AND">
                        <comparison operator="NOT_EQUAL">
                            <leftOperand>
                                <valueKB inventoryName="Repeat_1" columnName="First Name"/>
                            </leftOperand>
                            <rightOperand>
                                <valueText/>
                            </rightOperand>
                        </comparison>
                    </comparisons>
                </if>
                <then>
					<executeBlock navigationName="TemplateINPUT" name="TEMPLATE_INPUT">
						<parameters>
							<parameter name="XPATH" value="//label[text()='First Name']/.."/>
							<parameter name="INV_NAME" value="Repeat_1"/>
							<parameter name="COL_NAME" value="First Name"/>
						</parameters>
					</executeBlock>	
                </then>
                <else/>
            </IfThenElse>
            <!-- Last Name -->
            <IfThenElse>
                <if>
                    <comparisons separator="AND">
                        <comparison operator="NOT_EQUAL">
                            <leftOperand>
                                <valueKB inventoryName="Repeat_1" columnName="Last Name"/>
                            </leftOperand>
                            <rightOperand>
                                <valueText/>
                            </rightOperand>
                        </comparison>
                    </comparisons>
                </if>
                <then>
					<executeBlock navigationName="TemplateINPUT" name="TEMPLATE_INPUT">
						<parameters>
							<parameter name="XPATH" value="//label[text()='Last Name']/.."/>
							<parameter name="INV_NAME" value="Repeat_1"/>
							<parameter name="COL_NAME" value="Last Name"/>
						</parameters>
					</executeBlock>	
                </then>
                <else/>
            </IfThenElse>
            <!-- Email -->
			<executeBlock navigationName="TemplateINPUT" name="TEMPLATE_INPUT">
				<parameters>
					<parameter name="XPATH" value="//label[text()='E-Mail' or text()='Email']/.."/>
					<parameter name="INV_NAME" value="Repeat_1"/>
					<parameter name="COL_NAME" value="E-Mail"/>
				</parameters>
			</executeBlock>	
            <!-- User Name -->
            <IfThenElse>
                <if>
                    <comparisons separator="AND">
                        <comparison operator="NOT_EQUAL">
                            <leftOperand>
                                <valueKB inventoryName="Repeat_1" columnName="User Name"/>
                            </leftOperand>
                            <rightOperand>
                                <valueText/>
                            </rightOperand>
                        </comparison>
                    </comparisons>
                </if>
                <then>
                    <IfThenElse>
                        <if>
                            <findElement by="xpath">//label[text()='User Name']/..//input</findElement>
                        </if>
                        <then>
							<executeBlock navigationName="TemplateINPUT" name="TEMPLATE_INPUT">
								<parameters>
									<parameter name="XPATH" value="//label[text()='User Name']/.."/>
									<parameter name="INV_NAME" value="Repeat_1"/>
									<parameter name="COL_NAME" value="User Name"/>
								</parameters>
							</executeBlock>	
                        </then>
                        <else/>
                    </IfThenElse>
                </then>
                <else>
                    <error message="'User Name' is required."/>
                </else>
            </IfThenElse>
            <!-- Password -->
            <IfThenElse>
                <if>
                    <comparisons separator="AND">
                        <comparison operator="NOT_EQUAL">
                            <leftOperand>
                                <valueKB inventoryName="Repeat_1" columnName="Password"/>
                            </leftOperand>
                            <rightOperand>
                                <valueText/>
                            </rightOperand>
                        </comparison>
                    </comparisons>
                </if>
                <then>
                    <IfThenElse>
                        <if>
                            <findElement by="xpath">//label[text()='Password']/..//input</findElement>
                        </if>
                        <then>
							<executeBlock navigationName="TemplateINPUT" name="TEMPLATE_INPUT">
								<parameters>
									<parameter name="XPATH" value="//label[text()='Password']/.."/>
									<parameter name="INV_NAME" value="Repeat_1"/>
									<parameter name="COL_NAME" value="Password"/>
								</parameters>
							</executeBlock>	
                        </then>
                        <else/>
                    </IfThenElse>
                </then>
                <else>
                    <!-- <error message="'Password' is required."/> -->
                </else>
            </IfThenElse>
            <!-- Confirm Password -->
            <IfThenElse>
                <if>
                    <comparisons separator="AND">
                        <comparison operator="NOT_EQUAL">
                            <leftOperand>
                                <valueKB inventoryName="Repeat_1" columnName="Confirm Password"/>
                            </leftOperand>
                            <rightOperand>
                                <valueText/>
                            </rightOperand>
                        </comparison>
                    </comparisons>
                </if>
                <then>
                    <IfThenElse>
                        <if>
                            <findElement by="xpath">//label[text()='Confirm Password']/..//input</findElement>
                        </if>
                        <then>
							<executeBlock navigationName="TemplateINPUT" name="TEMPLATE_INPUT">
								<parameters>
									<parameter name="XPATH" value="//label[text()='Confirm Password']/.."/>
									<parameter name="INV_NAME" value="Repeat_1"/>
									<parameter name="COL_NAME" value="Confirm Password"/>
								</parameters>
							</executeBlock>	
                        </then>
                        <else/>
                    </IfThenElse>
                </then>
                <else>
                    <!-- <error message="'Confirm Password' is required."/> -->
                </else>
            </IfThenElse>
            <!-- External Identifier -->
            <IfThenElse>
                <if>
                    <comparisons separator="AND">
                        <comparison operator="NOT_EQUAL">
                            <leftOperand>
                                <valueKB inventoryName="Repeat_1" columnName="External Identifier"/>
                            </leftOperand>
                            <rightOperand>
                                <valueText/>
                            </rightOperand>
                        </comparison>
                    </comparisons>
                </if>
                <then>
                    <IfThenElse>
                        <if>
                            <findElement by="xpath">//label[text()='External Identifier']/../..//input</findElement>
                        </if>
                        <then>
							<executeBlock navigationName="TemplateINPUT" name="TEMPLATE_INPUT">
								<parameters>
									<parameter name="XPATH" value="//label[text()='External Identifier']/../.."/>
									<parameter name="INV_NAME" value="Repeat_1"/>
									<parameter name="COL_NAME" value="External Identifier"/>
								</parameters>
							</executeBlock>	
                        </then>
                        <else/>
                    </IfThenElse>
                </then>
                <else/>
            </IfThenElse>
            <!-- Associated Person Type -->
			<executeBlock navigationName="TemplateSELECT" name="TEMPATE_SELECT">
				<parameters>
					<parameter name="XPATH" value="//label[text()='Associated Person Type']/../.."/>
					<parameter name="INV_NAME" value="Repeat_1"/>
					<parameter name="COL_NAME" value="Associated Person Type"/>
				</parameters>
			</executeBlock>	
            <!-- Worker Name -->
            <IfThenElse>
                <if>
                    <comparisons separator="AND">
                        <comparison operator="NOT_EQUAL">
                            <leftOperand>
                                <valueKB inventoryName="Repeat_1" columnName="Worker Name"/>
                            </leftOperand>
                            <rightOperand>
                                <valueText/>
                            </rightOperand>
                        </comparison>
                    </comparisons>
                </if>
                <then>
                    <IfThenElse>
                        <if>
                            <findElement isDisplayed="true" by="xpath">//label[text()='Worker Name']/../..//input</findElement>
                        </if>
                        <then>
                            <findElement by="xpath">//label[text()='Worker Name']/../..//a[@title='Search']</findElement>
                            <click waitForPageToFinishRendering="true"/>
                            <findElement by="xpath">//div[contains(text(),'Search')]/../../../../../../..//label[text()='Search']/../../..//input</findElement>
                            <sendKeys isClear="true" waitForPageToFinishRendering="true">
                                <valueKB inventoryName="Repeat_1" columnName="Worker Name"/>
                            </sendKeys>
                            <findElement by="xpath">//div[contains(text(),'Search')]/../../../../../../..//a[@title='Search']</findElement>
                            <click waitForPageToFinishRendering="true"/>
                            <IfThenElse>
                                <if>
                                    <findElement by="xpath">//div[contains(text(),'Search')]/../../../../../../..//td[text()='<valueKB inventoryName="Repeat_1" columnName="Worker Name"/>']</findElement>
                                </if>
                                <then>
                                    <findElement isDisplayed="true" by="xpath">//div[contains(text(),'Search')]/../../../../../../..//td[text()='<valueKB inventoryName="Repeat_1" columnName="Worker Name"/>']</findElement>
                                    <click waitForPageToFinishRendering="true"/>
                                </then>
                                <else>
                                    <error message="No results found."/>
                                </else>
                            </IfThenElse>
                            <findElement isDisplayed="true" by="xpath">//div[contains(text(),'Search')]/../../../../../../..//button[@accesskey='K']</findElement>
                            <click waitForPageToFinishRendering="true"/>
                        </then>
                        <else/>
                    </IfThenElse>
                </then>
                <else/>
            </IfThenElse>
            <executeBlock name="CheckBox_Active"/>
            <executeBlock name="CheckBox_Locked"/>
        </block>
		<block name="CheckBox_Active">
			<executeBlock navigationName="TemplateCHECKBOX" name="TEMPLATE_CHECKBOX">
				<parameters>
					<parameter name="XPATH" value="//label[text()='Active']/.."/>
					<parameter name="INV_NAME" value="Repeat_1"/>
					<parameter name="COL_NAME" value="Active"/>
				</parameters>
			</executeBlock>
        </block>
		<block name="CheckBox_Locked">
			<executeBlock navigationName="TemplateCHECKBOX" name="TEMPLATE_CHECKBOX">
				<parameters>
					<parameter name="XPATH" value="//label[text()='Locked']/.."/>
					<parameter name="INV_NAME" value="Repeat_1"/>
					<parameter name="COL_NAME" value="Locked"/>
				</parameters>
			</executeBlock>
        </block>
		
		<!-- Repeat_2-->
		
		<block name="Add_Roles_Checkbox">
			<IfThenElse>
				<if>
					<findElement highlightTurnedOff="true" by="xpath" isSkipCheckDomError="true">//table[@summary='Roles']/../..//div[contains(@id,'scroller')]</findElement>
				</if>
				<then>
					<findElement highlightTurnedOff="true" by="xpath" isSkipCheckDomError="true">//table[@summary='Roles']/../..//div[contains(@id,'scroller')]</findElement>
					<scroll direction="DOWN"/>
					<pause durationInSecs="1"/>
					<executeBlock navigationName="TemplateCHECKBOX" name="TEMPLATE_CHECKBOX">
						<parameters>
							<parameter name="XPATH" value="//table[@summary='Roles']//tr[contains(@class,'Selected')]//td[3]//input/.."/>
							<parameter name="INV_NAME" value="Repeat_2"/>
							<parameter name="COL_NAME" value="Assignable"/>
						</parameters>
					</executeBlock>
				</then>
				<else/>
			</IfThenElse>
		</block>
		<!--<block name="RECHECK_SCROLLER">
			<findElement by="xpath">//button[text()='Add Role']</findElement>
			<click waitForPageToFinishRendering="true"/>
			<IfThenElse>
				<if>
					<findElement by="xpath" isSkipCheckDomError="true">//div[contains(@class,'Expansion')]/..//label[text()='Search']/../../..//input/..//a</findElement>
				</if>
				<then>
					<findElement by="xpath" isSkipCheckDomError="true">//div[contains(@class,'Expansion')]/..//label[text()='Search']/../../..//input/..//a</findElement>
					<click waitForPageToFinishRendering="true" isSkipCheckDomError="true"/>
					<pause durationInSecs="1"/>
					<findElement by="xpath" isSkipCheckDomError="true">//div[contains(@class,'Expansion')]/..//*[text()='Roles']</findElement>
					<click waitForPageToFinishRendering="true" isSkipCheckDomError="true"/>
					<pause durationInSecs="1"/>
				</then>
				<else>
					
				</else>
			</IfThenElse>
			<findElement by="xpath">//div[contains(@class,'Expansion')]/..//label[text()='Search']/../../..//input[@placeholder]</findElement>
			<sendKeys isClear="true" waitForPageToFinishRendering="true">
				<valueKB inventoryName="Repeat_2" columnName="Role Name"/>
			</sendKeys>
			<findElement by="xpath">//div[contains(@class,'Expansion')]/..//a[@title='Search']</findElement>
			<click waitForPageToFinishRendering="true"/>
			<IfThenElse>
				<if>
					<findElement by="xpath">//*[text()='Add Role Membership from Role']/../../../../../../..//*[text()='No data to display.']</findElement>
				</if>
				<then>
					<executeBlock name="Assign_Role_Done"/>
					<executeBlock name="Confirmation_PopUp"/>
					<executeBlock name="Manual_Scroller_2" isRepeatUntilBreak="true" repeatCountLimit="1000"/>
					<break/>
				</then>
				<else>
					<findElement by="xpath">//div[@title='Search Results']/../..//span[text()='<valueKB inventoryName="Repeat_2" columnName="Role Name"/>']</findElement>
					<click waitForPageToFinishRendering="true"/>
					<executeBlock name="Add_Role_Membership_Button"/>
					<executeBlock name="Assign_Role_Done"/>
					<executeBlock name="Confirmation_PopUp"/>
					<executeBlock name="Manual_Scroller_2" isRepeatUntilBreak="true" repeatCountLimit="1000"/>
					<break/>
					<executeBlock name="New_Add_Roles_Button"/>
				</else>
			</IfThenElse>
		</block>-->
		<!--<block name="Manual_Scroller_2">
			<IfThenElse>
				<if>
					<findElement isDisplayed="true" by="xpath" isSkipCheckDomError="true">//table[@summary='Roles']//td[1][text()='<valueKB inventoryName="Repeat_2" columnName="Role Name"/>']/../..//*[text()='<valueKB inventoryName="Repeat_2" columnName="Role Code"/>']</findElement>
				</if>
				<then>
					<executeBlock name="Update_Roll"/>
					<break/>
				</then>
				<else>
					<findElement highlightTurnedOff="true" isSkipCheckDomError="true" by="xpath">//table[@summary='Roles']/../..//div[contains(@id,'scroller')]</findElement>
					<IfThenElse>
						<if>
							<isEndOfScroll/>
						</if>
						<then>
							<error message="Please check your data and resubmit."/>
							<break/>
						</then>
						<else>
							<findElement highlightTurnedOff="true" by="xpath" isSkipCheckDomError="true">//table[@summary='Roles']/../..//div[contains(@id,'scroller')]</findElement>
							<scroll direction="DOWN"/>
							<pause durationInSecs="1"/>
						</else>
					</IfThenElse>
				</else>
			</IfThenElse>
		</block>-->
		
		<block name="Assign_Rules">
			<findElement by="xpath">//button[text()='Add Role']</findElement>
			<click waitForPageToFinishRendering="true"/>
			<IfThenElse>
				<if>
					<findElement by="xpath" isSkipCheckDomError="true">//div[contains(@class,'Expansion')]/..//label[text()='Search']/../../..//input/..//a</findElement>
				</if>
				<then>
					<findElement by="xpath" isSkipCheckDomError="true">//div[contains(@class,'Expansion')]/..//label[text()='Search']/../../..//input/..//a</findElement>
					<click waitForPageToFinishRendering="true" isSkipCheckDomError="true"/>
					<pause durationInSecs="1"/>
					<findElement by="xpath" isSkipCheckDomError="true">//div[contains(@class,'Expansion')]/..//*[text()='Roles']</findElement>
					<click waitForPageToFinishRendering="true" isSkipCheckDomError="true"/>
					<pause durationInSecs="1"/>
				</then>
				<else>
					
				</else>
			</IfThenElse>
			<findElement by="xpath">//div[contains(@class,'Expansion')]/..//label[text()='Search']/../../..//input[@placeholder]</findElement>
			<sendKeys isClear="true" waitForPageToFinishRendering="true">
				<valueKB inventoryName="Repeat_2" columnName="Role Code"/>
			</sendKeys>
			<findElement by="xpath">//div[contains(@class,'Expansion')]/..//a[@title='Search']</findElement>
			<click waitForPageToFinishRendering="true"/>
			<IfThenElse>
				<if>
					<findElement by="xpath">//*[text()='Add Role Membership from Role']/../../../../../../..//*[text()='No data to display.']</findElement>
				</if>
				<then>
					<executeBlock name="Assign_Role_Done"/>
					<executeBlock name="Confirmation_PopUp"/>
					<executeBlock name="Manual_Scroller" isRepeatUntilBreak="true" repeatCountLimit="1000"/>
					<break/>
					<executeBlock name="New_Add_Roles_Button"/>
				</then>
				<else>
					<IfThenElse>
						<if>
							<findElement isSkipCheckDomError="true" by="xpath">//div[@title='Search Results']/../..//*[text()='<valueKB inventoryName="Repeat_2" columnName="Role Code"/>']/../../..//*[text()='<valueKB inventoryName="Repeat_2" columnName="Role Name"/>']</findElement>
						</if>
						<then>
							<findElement isSkipCheckDomError="true" by="xpath">//div[@title='Search Results']/../..//*[text()='<valueKB inventoryName="Repeat_2" columnName="Role Code"/>']/../../..//*[text()='<valueKB inventoryName="Repeat_2" columnName="Role Name"/>']</findElement>
							<click waitForPageToFinishRendering="true"/>
							<executeBlock name="Add_Role_Membership_Button"/>
							<executeBlock name="Assign_Role_Done"/>
							<executeBlock name="Confirmation_PopUp"/>
							<executeBlock name="Manual_Scroller" isRepeatUntilBreak="true" repeatCountLimit="1000"/>
							<break/>
							<executeBlock name="New_Add_Roles_Button"/>
						</then>
						<else>
							<executeBlock name="Assign_Role_Done"/>
							<executeBlock name="Confirmation_PopUp"/>
							<executeBlock name="Manual_Scroller" isRepeatUntilBreak="true" repeatCountLimit="1000"/>
							<break/>
							<executeBlock name="New_Add_Roles_Button"/>
						</else>
					</IfThenElse>
				</else>
			</IfThenElse>
        </block>
		<block name="Manual_Scroller">
			<IfThenElse>
				<if>
					<findElement isDisplayed="true" by="xpath" isSkipCheckDomError="true">//table[@summary='Roles']/../..//div[contains(text(),'No data to display.')]</findElement>
				</if>
				<then>
					<executeBlock name="Add_Roles_Button"/>
					<break/>
				</then>
				<else>
					<IfThenElse>
						<if>
							<findElement isDisplayed="true" by="xpath" isSkipCheckDomError="true">//table[@summary='Roles']//td[1][text()='<valueKB inventoryName="Repeat_2" columnName="Role Name"/>']/../..//*[text()='<valueKB inventoryName="Repeat_2" columnName="Role Code"/>'][1]</findElement>
						</if>
						<then>
							<executeBlock name="Update_Roll"/>
							<findElement highlightTurnedOff="true" isSkipCheckDomError="true" by="xpath">//table[@summary='Roles']/../..//div[contains(@id,'scroller')]</findElement>
							<scroll direction="TOP"/>
							<break/>
							<executeBlock name="New_Add_Roles_Button"/>
						</then>
						<else>
							<findElement highlightTurnedOff="true" isSkipCheckDomError="true" by="xpath">//table[@summary='Roles']/../..//div[contains(@id,'scroller')]</findElement>
							<IfThenElse>
								<if>
									<isEndOfScroll/>
								</if>
								<then>
									<findElement highlightTurnedOff="true" isSkipCheckDomError="true" by="xpath">//table[@summary='Roles']/../..//div[contains(@id,'scroller')]</findElement>
									<scroll direction="TOP"/>
									<error message="Please check your data and resubmit."/>
									<!--<executeBlock name="RECHECK_SCROLLER"/>-->
									<break/>
								</then>
								<else>
									<findElement highlightTurnedOff="true" by="xpath" isSkipCheckDomError="true">//table[@summary='Roles']/../..//div[contains(@id,'scroller')]</findElement>
									<scroll direction="DOWN"/>
									<pause durationInSecs="1"/>
								</else>
							</IfThenElse>
						</else>
					</IfThenElse>
				</else>
			</IfThenElse>
		</block>
		<block name="Scrollbar_Roles">
			<executeBlock navigationName="TemplateSCROLLBAR" name="TEMPLATE_SCROLLBAR">
				<parameters>
					<parameter name="TEMPLATE_NO_DATA" value="//table[@summary='Roles']/../..//div[contains(text(),'No data to display.')]"/>
					<parameter name="TEMPLATE_FIRST_ROW" value="(//table[@summary='Roles'][@_rowcount]//tr[1]//td)[1]"/>
					<parameter name="TEMPLATE_SCROLLER" value="//table[@summary='Roles']/../..//div[contains(@id,'scroller')]"/>
					<parameter name="TEMPLATE_1_FIND_ROW">//table[@summary='Roles']//td[1][text()='<valueKB inventoryName="Repeat_2" columnName="Role Code"/>']/../..//td[1][text()='<valueKB inventoryName="Repeat_2" columnName="Role Name"/>']</parameter>
					<parameter name="TEMPLATE_CREATE" value="Add_Roles_Button"/>
					<parameter name="TEMPLATE_UPDATE" value="Update_Roll"/>
				</parameters>
			</executeBlock>
		</block>
        <block name="Add_Roles_Button">
            <findElement by="xpath">//button[text()='Add Role']</findElement>
            <click waitForPageToFinishRendering="true"/>
			<IfThenElse>
				<if>
					<findElement by="xpath" isSkipCheckDomError="true">//div[contains(@class,'Expansion')]/..//label[text()='Search']/../../..//input/..//a</findElement>
				</if>
				<then>
					<findElement by="xpath" isSkipCheckDomError="true">//div[contains(@class,'Expansion')]/..//label[text()='Search']/../../..//input/..//a</findElement>
					<click waitForPageToFinishRendering="true" isSkipCheckDomError="true"/>
					<pause durationInSecs="1"/>
					<findElement by="xpath" isSkipCheckDomError="true">//div[contains(@class,'Expansion')]/..//*[text()='Roles']</findElement>
					<click waitForPageToFinishRendering="true" isSkipCheckDomError="true"/>
					<pause durationInSecs="1"/>
				</then>
				<else>
					
				</else>
			</IfThenElse>
            <findElement by="xpath">//div[contains(@class,'Expansion')]/..//label[text()='Search']/../../..//input[@placeholder]</findElement>
            <sendKeys isClear="true" waitForPageToFinishRendering="true">
                <valueKB inventoryName="Repeat_2" columnName="Role Name"/>
            </sendKeys>
            <findElement by="xpath">//div[contains(@class,'Expansion')]/..//a[@title='Search']</findElement>
            <click waitForPageToFinishRendering="true"/>
			<IfThenElse>
                <if>
                    <comparisons separator="AND">
                        <comparison operator="NOT_EQUAL">
                            <leftOperand>
                                <valueKB inventoryName="Repeat_2" columnName="Role Name"/>
                            </leftOperand>
                            <rightOperand>
                                <valueText/>
                            </rightOperand>
                        </comparison>
                        <comparison operator="EQUAL">
                            <leftOperand>
                                <valueKB inventoryName="Repeat_2" columnName="Role Code"/>
                            </leftOperand>
                            <rightOperand>
                                <valueText/>
                            </rightOperand>
                        </comparison>
                    </comparisons>
                </if>
                <then>
                    <IfThenElse>
                        <if>
                            <findElement by="xpath">//div[@title='Search Results']/../..//span[text()='<valueKB inventoryName="Repeat_2" columnName="Role Name"/>']</findElement>
                        </if>
                        <then>
                            <findElement by="xpath">//div[@title='Search Results']/../..//span[text()='<valueKB inventoryName="Repeat_2" columnName="Role Name"/>']</findElement>
                            <click waitForPageToFinishRendering="true"/>
                            <executeBlock name="Add_Role_Membership_Button"/>
							<executeBlock name="Assign_Role_Done"/>
                            <executeBlock name="Confirmation_PopUp"/>
							<executeBlock name="Add_Roles_Checkbox"/>
							<executeBlock name="New_Add_Roles_Button"/>
                        </then>
                        <else>
							<error message="Please check your data and resubmit."/>
						</else>
                    </IfThenElse>
                </then>
                <else>
					<IfThenElse>
						<if>
							<comparisons separator="AND">
								<comparison operator="NOT_EQUAL">
									<leftOperand>
										<valueKB inventoryName="Repeat_2" columnName="Role Name"/>
									</leftOperand>
									<rightOperand>
										<valueText/>
									</rightOperand>
								</comparison>
								<comparison operator="NOT_EQUAL">
									<leftOperand>
										<valueKB inventoryName="Repeat_2" columnName="Role Code"/>
									</leftOperand>
									<rightOperand>
										<valueText/>
									</rightOperand>
								</comparison>
							</comparisons>
						</if>
						<then>
							<IfThenElse>
								<if>
									<findElement by="xpath">//div[contains(@class,'Expansion')]/..//*[text()='<valueKB inventoryName="Repeat_2" columnName="Role Name"/>']/../../..//*[text()='<valueKB inventoryName="Repeat_2" columnName="Role Code"/>']</findElement>
								</if>
								<then>
									<findElement by="xpath">//div[contains(@class,'Expansion')]/..//*[text()='<valueKB inventoryName="Repeat_2" columnName="Role Name"/>']/../../..//*[text()='<valueKB inventoryName="Repeat_2" columnName="Role Code"/>']</findElement>
									<click waitForPageToFinishRendering="true"/>
									<executeBlock name="Add_Role_Membership_Button"/>
									<executeBlock name="Assign_Role_Done"/>
									<executeBlock name="Confirmation_PopUp"/>
									<executeBlock name="Add_Roles_Checkbox"/>
									<executeBlock name="New_Add_Roles_Button"/>
								</then>
								<else>
									<error message="Please check your data and resubmit."/>
								</else>
							</IfThenElse>
						</then>
						<else>
							<error message="Please check your data and resubmit."/>
						</else>
					</IfThenElse>
				</else>
            </IfThenElse>
        </block>
		<block name="Add_Role_Membership_Button">
			<IfThenElse>
				<if>
					<findElement by="xpath" isSkipCheckDomError="true">//div[contains(@class,'Expansion')]/..//*[text()='No data to display.']</findElement>
				</if>
				<then>
					<error message="Data issue: No data found in Role Membership." />
				</then>
				<else>
					<findElement by="xpath">//div[contains(@class,'Expansion')]/..//button[text()='Add Role Membership']</findElement>
					<click waitForPageToFinishRendering="true"/>
				</else>
			</IfThenElse>
        </block>
		<block name="Assign_Role_Done">
			<IfThenElse>
				<if>
					<findElement by="xpath" isSkipCheckDomError="true">//div[contains(@class,'Expansion')]/..//button[text()='D']</findElement>
				</if>
				<then>
					<findElement by="xpath" isSkipCheckDomError="true">//div[contains(@class,'Expansion')]/..//button[text()='D']</findElement>
					<click waitForPageToFinishRendering="true" isSkipCheckDomError="true"/>
					<pause durationInSecs="1"/>
				</then>
				<else>
					<IfThenElse>
						<if>
							<findElement by="xpath" isSkipCheckDomError="true">//div[contains(@class,'Expansion')]/..//button[text()='ne']</findElement>
						</if>
						<then>
							<findElement by="xpath" isSkipCheckDomError="true">//div[contains(@class,'Expansion')]/..//button[text()='ne']</findElement>
							<click waitForPageToFinishRendering="true" isSkipCheckDomError="true"/>
							<pause durationInSecs="1"/>
						</then>
						<else>
							<IfThenElse>
								<if>
									<findElement by="xpath" isSkipCheckDomError="true">//div[contains(@class,'Expansion')]/..//*[text()='o']/..</findElement>
								</if>
								<then>
									<findElement by="xpath" isSkipCheckDomError="true">//div[contains(@class,'Expansion')]/..//*[text()='o']/..</findElement>
									<click waitForPageToFinishRendering="true" isSkipCheckDomError="true"/>
									<pause durationInSecs="1"/>
								</then>
								<else>
									
								</else>
							</IfThenElse>
						</else>
					</IfThenElse>
				</else>
			</IfThenElse>
		</block>
		<block name="Confirmation_PopUp">
            <IfThenElse>
                <if>
                    <findElement by="xpath">//div[contains(@data-afr-popupid,'FOd1')]//div[text()='Confirmation']</findElement>
                </if>
                <then>
                    <findElement by="xpath">//div[contains(@data-afr-popupid,'FOd1')]//button[text()='OK']</findElement>
                    <click waitForPageToFinishRendering="true"/>
                </then>
                <else/>
            </IfThenElse>
        </block>
		<block name="New_Add_Roles_Button">
			<executeBlock name="Save_and_Close"/>
			 <IfThenElse>
				<if>
					<findElement by="xpath">//table[@summary='Users']//label[text()='User Name']/../..//a[text()="<valueKB inventoryName="Repeat_1" columnName="User Name"/>"]</findElement>
				</if>
				<then>
					<findElement by="xpath">//table[@summary='Users']//label[text()='User Name']/../..//a[text()="<valueKB inventoryName="Repeat_1" columnName="User Name"/>"]</findElement>
					<click waitForPageToFinishRendering="true"/>
					<pause durationInSecs="1"/>
				</then>
				<else>
					
				</else>
			</IfThenElse>
			<executeBlock name="Edit_Button"/>
		</block>
		<block name="Update_Roll">
			<IfThenElse>
				<if>
					<findElement isDisplayed="true" by="xpath" isSkipCheckDomError="true">//table[@summary='Roles']//td[1][text()='<valueKB inventoryName="Repeat_2" columnName="Role Name"/>']/../..//*[text()='<valueKB inventoryName="Repeat_2" columnName="Role Code"/>']</findElement>
				</if>
				<then>
					<findElement isDisplayed="true" by="xpath" isSkipCheckDomError="true">//table[@summary='Roles']//td[1][text()='<valueKB inventoryName="Repeat_2" columnName="Role Name"/>']/../..//*[text()='<valueKB inventoryName="Repeat_2" columnName="Role Code"/>']</findElement>
					<click waitForPageToFinishRendering="true" isSkipCheckDomError="true"/>
					<pause durationInSecs="1"/>
					<executeBlock navigationName="TemplateCHECKBOX" name="TEMPLATE_CHECKBOX">
						<parameters>
							<parameter name="XPATH" value="//table[@summary='Roles']//tr[contains(@class,'Selected')]//td[3]"/>
							<parameter name="INV_NAME" value="Repeat_2"/>
							<parameter name="COL_NAME" value="Assignable"/>
						</parameters>
					</executeBlock>
				</then>
				<else/>
			</IfThenElse>
        </block>
		<!--Control Block-->
        <block name="Save_and_Close">
            <IfThenElse>
                <if>
                    <findElement highlightTurnedOff="true" by="xpath">//button[@accesskey='S'][@disabled]</findElement>
                </if>
                <then>
                    <findElement by="xpath">//span[text()='C']/..</findElement>
                    <click waitForPageToFinishRendering="true"/>
					<pause durationInSecs="1"/>
                </then>
                <else>
                    <findElement by="xpath">//button[@accesskey='S']</findElement>
                    <click waitForPageToFinishRendering="true"/>
					<pause durationInSecs="1"/>
                </else>
            </IfThenElse>
        </block>
        
        <block name="Done_Role">
            <IfThenElse>
                <if>
                    <findElement by="xpath">//div[text()='Add Role Membership']/../../../../../../..//button[@accesskey='o']</findElement>
                </if>
                <then>
                    <findElement by="xpath">//div[text()='Add Role Membership']/../../../../../../..//button[@accesskey='o']</findElement>
                    <click waitForPageToFinishRendering="true"/>
					<pause durationInSecs="1"/>
                </then>
                <else/>
            </IfThenElse>
        </block>
        <block name="Done_User">
            <IfThenElse>
                <if>
                    <findElement by="xpath">//button[@accesskey='o']</findElement>
                </if>
                <then>
                    <findElement by="xpath">//button[@accesskey='o']</findElement>
                    <click waitForPageToFinishRendering="true"/>
					<pause durationInSecs="1"/>
                </then>
                <else/>
            </IfThenElse>
        </block>
		
		<executeBlock name="GLOBAL_GO_TO_TASK"/>
        <window action="open"/>
        <repeat inventoryName="Repeat_1">
            <executeBlock name="Tab_User"/>
            <executeBlock name="Search_User"/>
            <repeat inventoryName="Repeat_2">
                <executeBlock name="Assign_Rules"/>
            </repeat>
            <executeBlock name="Done_Role"/>
            <executeBlock name="Save_and_Close"/>
            <executeBlock name="Done_User"/>
        </repeat>
        <window action="close"/>
    </fusionNavigation>
</navigation>
		